# Концепт версии 3.0: Симуляция Университета

Этот документ описывает масштабное расширение модели для симуляции студенческой жизни.

## 1. Масштаб и Структура
*   **Количество агентов**: 1875 (75 групп × 25 студентов).
*   **Иерархия**:
    1.  **Факультеты**: 5 шт.
    2.  **Потоки**: 5 на каждом факультете (Итого 25).
    3.  **Группы**: 3 на каждом потоке (Итого 75 групп).
    *   *Размер группы*: 25 студентов.

## 2. Новые параметры Агента
*   **Спортивность (Sportiness)**: `[0..1]`. Вероятность выбора спортзала вместо дома после пар.
*   **Склонность к прогулам (Skip Tendency)**: `[0..1]`. Вероятность уйти с пар или пропустить секцию.
*   **Текущий статус**: `[IN_CLASS, BREAK, GYM, HOME]`.

## 3. Локации и Пространство
*   **Аудитории**:
    *   Имеют лимит мест.
    *   *Механика рассадки*: Агент выбирает соседа. Если мест мало — вынужден садиться с кем-то (выбор «меньшего из зол» или случайный).
    *   *Взаимодействие*: Только внутри аудитории (шепот, записки).
*   **Спортзал**:
    *   Зоны: Баскетбол, Волейбол, Теннис.
    *   *Механика*: Взаимодействие только с игроками своего вида спорта.
    *   *Участие*: Добровольное (зависит от `Sportiness`).
*   **Дом**:
    *   «Черный ящик». Агент недоступен для взаимодействий до следующего утра.
    *   Попадание домой: штатное (конец дня) или внештатное (побег/прогул).

## 4. Расписание и Время
*   **Цикл**: Неделя (6 учебных дней + Воскресенье).
*   **Структура дня**:
    *   0-4 Пары (Учебные слоты).
    *   Спортивная секция (после пар).
*   **Воскресенье (Family Day)**:
    *   Агенты не взаимодействуют друг с другом.
    *   **Влияние семьи**: Происходит стохастическое изменение параметров (сброс стресса, накачка мотивации или наоборот). Реализуется как глобальное событие обновления состояний.

## 5. Механики Взаимодействия (Context-Aware)
*   **На паре**:
    *   Выбор ограничен соседями (радиус доступности).
*   **На перерыве**:
    *   Глобальный поиск или поиск в пределах этажа (высокая симпатия).
*   **Спорт**:
    *   Кластеризация по интересам.
*   **Побег**:
    *   Если срабатывает `Skip Tendency`, агент переходит в статус `HOME` и выпадает из графа взаимодействий до утра.

## 6. Техническая реализация (Draft)
*   Использование C++ ядра (`emotion_engine`) критически важно для обработки 1000 агентов.
*   Новый класс `ScheduleManager` для генерации и трекинга расписаний.
*   Новый класс `RelationshipManager`, учитывающий контекст (кто сейчас рядом).
